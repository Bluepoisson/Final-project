{
  "{\"sourceRoot\":\"/Users/Nadia/Technigo/Final-project/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Nadia/Technigo/Final-project/server\",\"filename\":\"/Users/Nadia/Technigo/Final-project/server/server.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Nadia/Technigo/Final-project/server\",\"plugins\":[],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Nadia/Technigo/Final-project/server",
      "filename": "/Users/Nadia/Technigo/Final-project/server/server.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Nadia/Technigo/Final-project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Nadia/Technigo/Final-project/server/server.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/Nadia/Technigo/Final-project/server/server.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
        "sourceFileName": "server.js"
      }
    },
    "ast": null,
    "code": "import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport mongoose from 'mongoose';\nimport crypto from 'crypto';\nimport bcrypt from 'bcrypt';\nimport dotenv from 'dotenv';\ndotenv.config();\nconsole.log(\"Our hero is:\" + process.env.HERO);\nconst mongoUrl = process.env.MONGO_URL || 'mongodb://localhost/finalProject';\nmongoose.connect(mongoUrl, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nmongoose.Promise = Promise;\nconst userSchema = new mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  password: {\n    type: String,\n    required: true,\n    minLength: 5\n  },\n  accessToken: {\n    type: String,\n    default: () => crypto.randomBytes(128).toString('hex'),\n    unique: true\n  }\n});\nuserSchema.pre('save', async function (next) {\n  const user = this;\n\n  if (!user.isModified('password')) {\n    return next();\n  }\n\n  if (process.env.RESET_DATABASE) {\n    console.log('Resetting database!');\n\n    const seedDatabase = async () => {\n      await User.deleteMany();\n      await Review.deleteMany();\n    };\n\n    seedDatabase();\n  }\n\n  const salt = bcrypt.genSaltSync();\n  console.log(`PRE- password before hash: ${user.password}`);\n  user.password = bcrypt.hashSync(user.password, salt);\n  console.log(`PRE- password after  hash: ${user.password}`); // Continue with the save\n\n  next();\n});\n\nconst authenticateUser = async (req, res, next) => {\n  try {\n    const accessToken = req.header('Authorization');\n    const user = await User.findOne({\n      accessToken\n    });\n\n    if (!user) {\n      throw 'User not found';\n    }\n\n    req.user = user;\n    next();\n  } catch (err) {\n    const errorMessage = 'Please try logging in again';\n    console.log(errorMessage);\n    res.status(401).json({\n      error: errorMessage\n    });\n  }\n}; //! google review details?\n\n\nconst Review = mongoose.model('Review', {\n  author: {\n    type: String,\n    unique: true,\n    minLength: 3,\n    maxLength: 20\n  },\n  text: {\n    type: String,\n    required: true,\n    minlength: [5, \"Review must be at least 5 characters\"],\n    maxlength: [200, \"Review must be at most 200 characters\"]\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nconst User = mongoose.model('User', userSchema); //   PORT=9000 npm start\n\nconst port = process.env.PORT || 8080;\nconst app = express();\n\nconst listEndpoints = require('express-list-endpoints');\n\napp.use(cors());\napp.use(bodyParser.json());\napp.use((req, res, next) => {\n  if (mongoose.connection.readyState === 1) {\n    next();\n  } else {\n    res.status(503).json({\n      error: 'Service Unavailable'\n    });\n  }\n});\napp.get('/', (req, res) => {\n  res.send(listEndpoints(app));\n}); // Sign-up\n\napp.post('/users', async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    const user = await new User({\n      email,\n      password\n    }).save();\n    res.status(200).json({\n      userId: user._id,\n      accessToken: user.accessToken\n    });\n  } catch (err) {\n    res.status(400).json({\n      message: 'Could not create user',\n      errors: err\n    });\n  }\n}); // Login\n\napp.post('/sessions', async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    const user = await User.findOne({\n      email\n    });\n\n    if (user && bcrypt.compareSync(password, user.password)) {\n      res.status(200).json({\n        userId: user._id,\n        accessToken: user.accessToken\n      });\n    } else {\n      throw 'User not found';\n    }\n  } catch (err) {\n    res.status(404).json({\n      error: 'User not found'\n    });\n  }\n});\napp.get('/secret', authenticateUser); // Allow one specific domain for one specific endpoint\n\napp.get('/secret', cors({\n  origin: 'localhost:3000'\n}), async (req, res) => {\n  console.log(`User from authenticateUser: ${req.user}`);\n  const secretMessage = `We can modify this secret message for ${req.user.email}`;\n  res.status(200).json({\n    secretMessage\n  });\n}); // Get user specific information\n\napp.get('/users/:id/profile', authenticateUser);\napp.get('/users/:id/profile', async (req, res) => {\n  const user = await User.findOne({\n    _id: req.params.id\n  });\n  const publicProfileMessage = `This is a public profile message for ${user.email}`;\n  const privateProfileMessage = `This is a private profile message for ${user.email}`;\n  console.log(`Authenticated req.user._id: '${req.user._id.$oid}'`);\n  console.log(`Requested     user._id    : '${user._id}'`);\n  console.log(`Equal   : ${req.user_id == user._id}`); // Decide private or public here\n\n  if (req.user._id.$oid === user._id.$oid) {\n    // Private\n    res.status(200).json({\n      profileMessage: privateProfileMessage\n    });\n  } else {\n    // Public information or Forbidden (403) because the users don't match\n    res.status(200).json({\n      profileMessage: publicProfileMessage\n    });\n  }\n});\napp.get('/reviews', async (req, res) => {\n  try {\n    const reviews = await Review.find().sort({\n      createdAt: 'desc'\n    }).limit(20).exec();\n    res.status(200).json(reviews);\n  } catch (err) {\n    res.status(404).json({\n      message: 'Page not found',\n      error: err.errors\n    });\n  }\n});\napp.post('/reviews', async (req, res) => {\n  const {\n    message,\n    email\n  } = req.body;\n  const review = new Review({\n    message,\n    email\n  });\n\n  try {\n    const savedReview = await review.save();\n    res.status(200).json(savedReview);\n  } catch (err) {\n    res.status(400).json({\n      message: 'Bad request. Could not save review to the database',\n      error: err.errors\n    });\n  }\n}); // Start the server\n\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwiYm9keVBhcnNlciIsImNvcnMiLCJtb25nb29zZSIsImNyeXB0byIsImJjcnlwdCIsImRvdGVudiIsImNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiSEVSTyIsIm1vbmdvVXJsIiwiTU9OR09fVVJMIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsIlByb21pc2UiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiZW1haWwiLCJ0eXBlIiwiU3RyaW5nIiwidW5pcXVlIiwicmVxdWlyZWQiLCJwYXNzd29yZCIsIm1pbkxlbmd0aCIsImFjY2Vzc1Rva2VuIiwiZGVmYXVsdCIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJwcmUiLCJuZXh0IiwidXNlciIsImlzTW9kaWZpZWQiLCJSRVNFVF9EQVRBQkFTRSIsInNlZWREYXRhYmFzZSIsIlVzZXIiLCJkZWxldGVNYW55IiwiUmV2aWV3Iiwic2FsdCIsImdlblNhbHRTeW5jIiwiaGFzaFN5bmMiLCJhdXRoZW50aWNhdGVVc2VyIiwicmVxIiwicmVzIiwiaGVhZGVyIiwiZmluZE9uZSIsImVyciIsImVycm9yTWVzc2FnZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsIm1vZGVsIiwiYXV0aG9yIiwibWF4TGVuZ3RoIiwidGV4dCIsIm1pbmxlbmd0aCIsIm1heGxlbmd0aCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJwb3J0IiwiUE9SVCIsImFwcCIsImxpc3RFbmRwb2ludHMiLCJyZXF1aXJlIiwidXNlIiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJnZXQiLCJzZW5kIiwicG9zdCIsImJvZHkiLCJzYXZlIiwidXNlcklkIiwiX2lkIiwibWVzc2FnZSIsImVycm9ycyIsImNvbXBhcmVTeW5jIiwib3JpZ2luIiwic2VjcmV0TWVzc2FnZSIsInBhcmFtcyIsImlkIiwicHVibGljUHJvZmlsZU1lc3NhZ2UiLCJwcml2YXRlUHJvZmlsZU1lc3NhZ2UiLCIkb2lkIiwidXNlcl9pZCIsInByb2ZpbGVNZXNzYWdlIiwicmV2aWV3cyIsImZpbmQiLCJzb3J0IiwibGltaXQiLCJleGVjIiwicmV2aWV3Iiwic2F2ZWRSZXZpZXciLCJsaXN0ZW4iXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLE9BQVAsTUFBb0IsU0FBcEI7QUFDQSxPQUFPQyxVQUFQLE1BQXVCLGFBQXZCO0FBQ0EsT0FBT0MsSUFBUCxNQUFpQixNQUFqQjtBQUNBLE9BQU9DLFFBQVAsTUFBcUIsVUFBckI7QUFDQSxPQUFPQyxNQUFQLE1BQW1CLFFBQW5CO0FBQ0EsT0FBT0MsTUFBUCxNQUFtQixRQUFuQjtBQUNBLE9BQU9DLE1BQVAsTUFBbUIsUUFBbkI7QUFFQUEsTUFBTSxDQUFDQyxNQUFQO0FBQ0FDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGlCQUFpQkMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLElBQXpDO0FBRUEsTUFBTUMsUUFBUSxHQUFHSCxPQUFPLENBQUNDLEdBQVIsQ0FBWUcsU0FBWixJQUF5QixrQ0FBMUM7QUFDQVgsUUFBUSxDQUFDWSxPQUFULENBQWlCRixRQUFqQixFQUEyQjtBQUFFRyxFQUFBQSxlQUFlLEVBQUUsSUFBbkI7QUFBeUJDLEVBQUFBLGtCQUFrQixFQUFFO0FBQTdDLENBQTNCO0FBQ0FkLFFBQVEsQ0FBQ2UsT0FBVCxHQUFtQkEsT0FBbkI7QUFFQSxNQUFNQyxVQUFVLEdBQUcsSUFBSWhCLFFBQVEsQ0FBQ2lCLE1BQWIsQ0FBb0I7QUFDckNDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsSUFBQUEsTUFBTSxFQUFFLElBRkg7QUFHTEMsSUFBQUEsUUFBUSxFQUFFO0FBSEwsR0FEOEI7QUFNckNDLEVBQUFBLFFBQVEsRUFBRTtBQUNSSixJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkUsSUFBQUEsUUFBUSxFQUFFLElBRkY7QUFHUkUsSUFBQUEsU0FBUyxFQUFFO0FB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QUNELENBRkQiLCJzb3VyY2VSb290IjoiL1VzZXJzL05hZGlhL1RlY2huaWdvL0ZpbmFsLXByb2plY3Qvc2VydmVyLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5jb25zb2xlLmxvZyhcIk91ciBoZXJvIGlzOlwiICsgcHJvY2Vzcy5lbnYuSEVSTyk7XG5cbmNvbnN0IG1vbmdvVXJsID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0L2ZpbmFsUHJvamVjdCc7XG5tb25nb29zZS5jb25uZWN0KG1vbmdvVXJsLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pO1xubW9uZ29vc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdW5pcXVlOiB0cnVlLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBtaW5MZW5ndGg6IDUsXG4gIH0sXG4gIGFjY2Vzc1Rva2VuOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICgpID0+IGNyeXB0by5yYW5kb21CeXRlcygxMjgpLnRvU3RyaW5nKCdoZXgnKSxcbiAgICB1bmlxdWU6IHRydWUsXG4gIH0sXG59KTtcblxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xuICBjb25zdCB1c2VyID0gdGhpcztcblxuICBpZiAoIXVzZXIuaXNNb2RpZmllZCgncGFzc3dvcmQnKSkge1xuICAgIHJldHVybiBuZXh0KCk7XG4gIH1cblxuXG5pZiAocHJvY2Vzcy5lbnYuUkVTRVRfREFUQUJBU0UpIHtcbiAgICBjb25zb2xlLmxvZygnUmVzZXR0aW5nIGRhdGFiYXNlIScpO1xuICAgIGNvbnN0IHNlZWREYXRhYmFzZSA9IGFzeW5jICgpID0+IHtcbiAgICBcbiAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoKTtcbiAgICBhd2FpdCBSZXZpZXcuZGVsZXRlTWFueSgpO1xuICAgIFxuXG4gICAgfVxuICAgIHNlZWREYXRhYmFzZSgpO1xuICB9XG5cbiAgY29uc3Qgc2FsdCA9IGJjcnlwdC5nZW5TYWx0U3luYygpO1xuICBjb25zb2xlLmxvZyhgUFJFLSBwYXNzd29yZCBiZWZvcmUgaGFzaDogJHt1c2VyLnBhc3N3b3JkfWApO1xuICB1c2VyLnBhc3N3b3JkID0gYmNyeXB0Lmhhc2hTeW5jKHVzZXIucGFzc3dvcmQsIHNhbHQpO1xuICBjb25zb2xlLmxvZyhgUFJFLSBwYXNzd29yZCBhZnRlciAgaGFzaDogJHt1c2VyLnBhc3N3b3JkfWApO1xuXG4gIC8vIENvbnRpbnVlIHdpdGggdGhlIHNhdmVcbiAgbmV4dCgpO1xufSk7XG5cbmNvbnN0IGF1dGhlbnRpY2F0ZVVzZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHJlcS5oZWFkZXIoJ0F1dGhvcml6YXRpb24nKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgYWNjZXNzVG9rZW4gfSk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aHJvdyAnVXNlciBub3QgZm91bmQnO1xuICAgIH1cbiAgICByZXEudXNlciA9IHVzZXI7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAnUGxlYXNlIHRyeSBsb2dnaW5nIGluIGFnYWluJztcbiAgICBjb25zb2xlLmxvZyhlcnJvck1lc3NhZ2UpO1xuICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KTtcbiAgfVxufTtcblxuLy8hIGdvb2dsZSByZXZpZXcgZGV0YWlscz9cblxuY29uc3QgUmV2aWV3ID0gIG1vbmdvb3NlLm1vZGVsKCdSZXZpZXcnLCB7XG4gICAgYXV0aG9yOiB7IFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICBtYXhMZW5ndGg6IDIwXG4gICAgfSxcbiAgICB0ZXh0OiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG1pbmxlbmd0aDogWzUsIFwiUmV2aWV3IG11c3QgYmUgYXQgbGVhc3QgNSBjaGFyYWN0ZXJzXCJdLFxuICAgICAgICBtYXhsZW5ndGg6ICBbMjAwLCBcIlJldmlldyBtdXN0IGJlIGF0IG1vc3QgMjAwIGNoYXJhY3RlcnNcIl0sXG4gICAgfSxcbiAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgdHlwZTogRGF0ZSxcbiAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgICB9LFxufSk7XG5cblxuY29uc3QgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSk7XG5cblxuLy8gICBQT1JUPTkwMDAgbnBtIHN0YXJ0XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG5jb25zdCBsaXN0RW5kcG9pbnRzID0gcmVxdWlyZSgnZXhwcmVzcy1saXN0LWVuZHBvaW50cycpXG5cbmFwcC51c2UoY29ycygpKVxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSlcblxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSA9PT0gMSkge1xuICAgIG5leHQoKVxuICB9IGVsc2Uge1xuICAgIHJlcy5zdGF0dXMoNTAzKS5qc29uKHsgZXJyb3I6ICdTZXJ2aWNlIFVuYXZhaWxhYmxlJyB9KVxuICB9XG59KVxuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnNlbmQobGlzdEVuZHBvaW50cyhhcHApKVxuICB9KVxuXG4vLyBTaWduLXVwXG5hcHAucG9zdCgnL3VzZXJzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBuZXcgVXNlcih7XG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgIH0pLnNhdmUoKTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJJZDogdXNlci5faWQsIGFjY2Vzc1Rva2VuOiB1c2VyLmFjY2Vzc1Rva2VuIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdDb3VsZCBub3QgY3JlYXRlIHVzZXInLCBlcnJvcnM6IGVyciB9KTtcbiAgfVxufSk7XG5cbi8vIExvZ2luXG5hcHAucG9zdCgnL3Nlc3Npb25zJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICBpZiAodXNlciAmJiBiY3J5cHQuY29tcGFyZVN5bmMocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJJZDogdXNlci5faWQsIGFjY2Vzc1Rva2VuOiB1c2VyLmFjY2Vzc1Rva2VuIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyAnVXNlciBub3QgZm91bmQnO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1VzZXIgbm90IGZvdW5kJyB9KTtcbiAgfVxufSk7XG5cbmFwcC5nZXQoJy9zZWNyZXQnLCBhdXRoZW50aWNhdGVVc2VyKTtcbi8vIEFsbG93IG9uZSBzcGVjaWZpYyBkb21haW4gZm9yIG9uZSBzcGVjaWZpYyBlbmRwb2ludFxuYXBwLmdldCgnL3NlY3JldCcsIGNvcnMoeyBvcmlnaW46ICdsb2NhbGhvc3Q6MzAwMCcgfSksIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhgVXNlciBmcm9tIGF1dGhlbnRpY2F0ZVVzZXI6ICR7cmVxLnVzZXJ9YCk7XG4gIGNvbnN0IHNlY3JldE1lc3NhZ2UgPSBgV2UgY2FuIG1vZGlmeSB0aGlzIHNlY3JldCBtZXNzYWdlIGZvciAke3JlcS51c2VyLmVtYWlsfWA7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc2VjcmV0TWVzc2FnZSB9KTtcbn0pO1xuXG5cbi8vIEdldCB1c2VyIHNwZWNpZmljIGluZm9ybWF0aW9uXG5hcHAuZ2V0KCcvdXNlcnMvOmlkL3Byb2ZpbGUnLCBhdXRoZW50aWNhdGVVc2VyKTtcbmFwcC5nZXQoJy91c2Vycy86aWQvcHJvZmlsZScsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pO1xuICBjb25zdCBwdWJsaWNQcm9maWxlTWVzc2FnZSA9IGBUaGlzIGlzIGEgcHVibGljIHByb2ZpbGUgbWVzc2FnZSBmb3IgJHt1c2VyLmVtYWlsfWA7XG4gIGNvbnN0IHByaXZhdGVQcm9maWxlTWVzc2FnZSA9IGBUaGlzIGlzIGEgcHJpdmF0ZSBwcm9maWxlIG1lc3NhZ2UgZm9yICR7dXNlci5lbWFpbH1gO1xuXG4gIGNvbnNvbGUubG9nKGBBdXRoZW50aWNhdGVkIHJlcS51c2VyLl9pZDogJyR7cmVxLnVzZXIuX2lkLiRvaWR9J2ApO1xuICBjb25zb2xlLmxvZyhgUmVxdWVzdGVkICAgICB1c2VyLl9pZCAgICA6ICcke3VzZXIuX2lkfSdgKTtcbiAgY29uc29sZS5sb2coYEVxdWFsICAgOiAke3JlcS51c2VyX2lkID09IHVzZXIuX2lkfWApO1xuXG4gIC8vIERlY2lkZSBwcml2YXRlIG9yIHB1YmxpYyBoZXJlXG4gIGlmIChyZXEudXNlci5faWQuJG9pZCA9PT0gdXNlci5faWQuJG9pZCkge1xuICAgIC8vIFByaXZhdGVcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHByb2ZpbGVNZXNzYWdlOiBwcml2YXRlUHJvZmlsZU1lc3NhZ2UgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gUHVibGljIGluZm9ybWF0aW9uIG9yIEZvcmJpZGRlbiAoNDAzKSBiZWNhdXNlIHRoZSB1c2VycyBkb24ndCBtYXRjaFxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcHJvZmlsZU1lc3NhZ2U6IHB1YmxpY1Byb2ZpbGVNZXNzYWdlIH0pO1xuICB9XG59KTtcblxuXG5hcHAuZ2V0KCcvcmV2aWV3cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgY29uc3QgcmV2aWV3cyA9IGF3YWl0IFJldmlldy5maW5kKClcbiAgICAgICAgLnNvcnQoe2NyZWF0ZWRBdDogJ2Rlc2MnfSlcbiAgICAgICAgLmxpbWl0KDIwKVxuICAgICAgICAuZXhlYygpOyBcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmV2aWV3cyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdQYWdlIG5vdCBmb3VuZCcsIGVycm9yOiBlcnIuZXJyb3JzIH0pXG4gICAgfVxuICB9KTtcbiAgXG4gIGFwcC5wb3N0KCcvcmV2aWV3cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgZW1haWwgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHJldmlldyA9IG5ldyBSZXZpZXcoeyBtZXNzYWdlLCBlbWFpbCB9KTtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhdmVkUmV2aWV3ID0gYXdhaXQgcmV2aWV3LnNhdmUoKTtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHNhdmVkUmV2aWV3KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0JhZCByZXF1ZXN0LiBDb3VsZCBub3Qgc2F2ZSByZXZpZXcgdG8gdGhlIGRhdGFiYXNlJywgZXJyb3I6IGVyci5lcnJvcnMgfSk7XG4gICAgfVxuICB9KTtcblxuLy8gU3RhcnQgdGhlIHNlcnZlclxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKTtcbn0pO1xuXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "express",
        "bodyParser",
        "cors",
        "mongoose",
        "crypto",
        "bcrypt",
        "dotenv",
        "config",
        "console",
        "log",
        "process",
        "env",
        "HERO",
        "mongoUrl",
        "MONGO_URL",
        "connect",
        "useNewUrlParser",
        "useUnifiedTopology",
        "Promise",
        "userSchema",
        "Schema",
        "email",
        "type",
        "String",
        "unique",
        "required",
        "password",
        "minLength",
        "accessToken",
        "default",
        "randomBytes",
        "toString",
        "pre",
        "next",
        "user",
        "isModified",
        "RESET_DATABASE",
        "seedDatabase",
        "User",
        "deleteMany",
        "Review",
        "salt",
        "genSaltSync",
        "hashSync",
        "authenticateUser",
        "req",
        "res",
        "header",
        "findOne",
        "err",
        "errorMessage",
        "status",
        "json",
        "error",
        "model",
        "author",
        "maxLength",
        "text",
        "minlength",
        "maxlength",
        "createdAt",
        "Date",
        "now",
        "port",
        "PORT",
        "app",
        "listEndpoints",
        "require",
        "use",
        "connection",
        "readyState",
        "get",
        "send",
        "post",
        "body",
        "save",
        "userId",
        "_id",
        "message",
        "errors",
        "compareSync",
        "origin",
        "secretMessage",
        "params",
        "id",
        "publicProfileMessage",
        "privateProfileMessage",
        "$oid",
        "user_id",
        "profileMessage",
        "reviews",
        "find",
        "sort",
        "limit",
        "exec",
        "review",
        "savedReview",
        "listen"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
      "sourcesContent": [
        "import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport mongoose from 'mongoose';\nimport crypto from 'crypto';\nimport bcrypt from 'bcrypt';\nimport dotenv from 'dotenv';\n\ndotenv.config();\nconsole.log(\"Our hero is:\" + process.env.HERO);\n\nconst mongoUrl = process.env.MONGO_URL || 'mongodb://localhost/finalProject';\nmongoose.connect(mongoUrl, { useNewUrlParser: true, useUnifiedTopology: true });\nmongoose.Promise = Promise;\n\nconst userSchema = new mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    required: true,\n  },\n  password: {\n    type: String,\n    required: true,\n    minLength: 5,\n  },\n  accessToken: {\n    type: String,\n    default: () => crypto.randomBytes(128).toString('hex'),\n    unique: true,\n  },\n});\n\nuserSchema.pre('save', async function (next) {\n  const user = this;\n\n  if (!user.isModified('password')) {\n    return next();\n  }\n\n\nif (process.env.RESET_DATABASE) {\n    console.log('Resetting database!');\n    const seedDatabase = async () => {\n    \n    await User.deleteMany();\n    await Review.deleteMany();\n    \n\n    }\n    seedDatabase();\n  }\n\n  const salt = bcrypt.genSaltSync();\n  console.log(`PRE- password before hash: ${user.password}`);\n  user.password = bcrypt.hashSync(user.password, salt);\n  console.log(`PRE- password after  hash: ${user.password}`);\n\n  // Continue with the save\n  next();\n});\n\nconst authenticateUser = async (req, res, next) => {\n  try {\n    const accessToken = req.header('Authorization');\n    const user = await User.findOne({ accessToken });\n    if (!user) {\n      throw 'User not found';\n    }\n    req.user = user;\n    next();\n  } catch (err) {\n    const errorMessage = 'Please try logging in again';\n    console.log(errorMessage);\n    res.status(401).json({ error: errorMessage });\n  }\n};\n\n//! google review details?\n\nconst Review =  mongoose.model('Review', {\n    author: { \n        type: String,\n        unique: true,\n        minLength: 3,\n        maxLength: 20\n    },\n    text: {\n        type: String,\n        required: true,\n        minlength: [5, \"Review must be at least 5 characters\"],\n        maxlength:  [200, \"Review must be at most 200 characters\"],\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n});\n\n\nconst User = mongoose.model('User', userSchema);\n\n\n//   PORT=9000 npm start\nconst port = process.env.PORT || 8080;\nconst app = express();\n\nconst listEndpoints = require('express-list-endpoints')\n\napp.use(cors())\napp.use(bodyParser.json())\n\napp.use((req, res, next) => {\n  if (mongoose.connection.readyState === 1) {\n    next()\n  } else {\n    res.status(503).json({ error: 'Service Unavailable' })\n  }\n})\n\napp.get('/', (req, res) => {\n    res.send(listEndpoints(app))\n  })\n\n// Sign-up\napp.post('/users', async (req, res) => {\n  try {\n    const { email, password } = req.body;\n    const user = await new User({\n      email,\n      password,\n    }).save();\n    res.status(200).json({ userId: user._id, accessToken: user.accessToken });\n  } catch (err) {\n    res.status(400).json({ message: 'Could not create user', errors: err });\n  }\n});\n\n// Login\napp.post('/sessions', async (req, res) => {\n  try {\n    const { email, password } = req.body;\n    const user = await User.findOne({ email });\n    if (user && bcrypt.compareSync(password, user.password)) {\n      res.status(200).json({ userId: user._id, accessToken: user.accessToken });\n    } else {\n      throw 'User not found';\n    }\n  } catch (err) {\n    res.status(404).json({ error: 'User not found' });\n  }\n});\n\napp.get('/secret', authenticateUser);\n// Allow one specific domain for one specific endpoint\napp.get('/secret', cors({ origin: 'localhost:3000' }), async (req, res) => {\n  console.log(`User from authenticateUser: ${req.user}`);\n  const secretMessage = `We can modify this secret message for ${req.user.email}`;\n  res.status(200).json({ secretMessage });\n});\n\n\n// Get user specific information\napp.get('/users/:id/profile', authenticateUser);\napp.get('/users/:id/profile', async (req, res) => {\n  const user = await User.findOne({ _id: req.params.id });\n  const publicProfileMessage = `This is a public profile message for ${user.email}`;\n  const privateProfileMessage = `This is a private profile message for ${user.email}`;\n\n  console.log(`Authenticated req.user._id: '${req.user._id.$oid}'`);\n  console.log(`Requested     user._id    : '${user._id}'`);\n  console.log(`Equal   : ${req.user_id == user._id}`);\n\n  // Decide private or public here\n  if (req.user._id.$oid === user._id.$oid) {\n    // Private\n    res.status(200).json({ profileMessage: privateProfileMessage });\n  } else {\n    // Public information or Forbidden (403) because the users don't match\n    res.status(200).json({ profileMessage: publicProfileMessage });\n  }\n});\n\n\napp.get('/reviews', async (req, res) => {\n    try {\n    const reviews = await Review.find()\n        .sort({createdAt: 'desc'})\n        .limit(20)\n        .exec(); \n        res.status(200).json(reviews);\n    } catch (err) {\n      res.status(404).json({ message: 'Page not found', error: err.errors })\n    }\n  });\n  \n  app.post('/reviews', async (req, res) => {\n    const { message, email } = req.body;\n    const review = new Review({ message, email });\n  \n    try {\n      const savedReview = await review.save();\n      res.status(200).json(savedReview);\n    } catch (err) {\n      res.status(400).json({ message: 'Bad request. Could not save review to the database', error: err.errors });\n    }\n  });\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1612293514195
  },
  "{\"sourceRoot\":\"/Users/Nadia/Technigo/Final-project/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Nadia/Technigo/Final-project/server\",\"filename\":\"/Users/Nadia/Technigo/Final-project/server/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Nadia/Technigo/Final-project/server\",\"plugins\":[],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Nadia/Technigo/Final-project/server",
      "filename": "/Users/Nadia/Technigo/Final-project/server/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Nadia/Technigo/Final-project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Nadia/Technigo/Final-project/server/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/Nadia/Technigo/Final-project/server/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport mongoose from 'mongoose';\nimport crypto from 'crypto';\nimport bcrypt from 'bcrypt';\nimport dotenv from 'dotenv';\ndotenv.config();\nconsole.log(\"Our hero is:\" + process.env.HERO);\nconst mongoUrl = process.env.MONGO_URL || 'mongodb://localhost/finalProject';\nmongoose.connect(mongoUrl, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nmongoose.Promise = Promise;\nconst userSchema = new mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  password: {\n    type: String,\n    required: true,\n    minLength: 5\n  },\n  accessToken: {\n    type: String,\n    default: () => crypto.randomBytes(128).toString('hex'),\n    unique: true\n  }\n});\nuserSchema.pre('save', async function (next) {\n  const user = this;\n\n  if (!user.isModified('password')) {\n    return next();\n  }\n\n  if (process.env.RESET_DATABASE) {\n    console.log('Resetting database!');\n\n    const seedDatabase = async () => {\n      await User.deleteMany();\n      await Review.deleteMany();\n    };\n\n    seedDatabase();\n  }\n\n  const salt = bcrypt.genSaltSync();\n  console.log(`PRE- password before hash: ${user.password}`);\n  user.password = bcrypt.hashSync(user.password, salt);\n  console.log(`PRE- password after  hash: ${user.password}`); // Continue with the save\n\n  next();\n});\n\nconst authenticateUser = async (req, res, next) => {\n  try {\n    const accessToken = req.header('Authorization');\n    const user = await User.findOne({\n      accessToken\n    });\n\n    if (!user) {\n      throw 'User not found';\n    }\n\n    req.user = user;\n    next();\n  } catch (err) {\n    const errorMessage = 'Please try logging in again';\n    console.log(errorMessage);\n    res.status(401).json({\n      error: errorMessage\n    });\n  }\n}; //! google review details?\n\n\nconst Review = mongoose.model('Review', {\n  author: {\n    type: String,\n    unique: true,\n    minLength: 3,\n    maxLength: 20\n  },\n  text: {\n    type: String,\n    required: true,\n    minlength: [5, \"Review must be at least 5 characters\"],\n    maxlength: [200, \"Review must be at most 200 characters\"]\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nconst User = mongoose.model('User', userSchema); //   PORT=9000 npm start\n\nconst port = process.env.PORT || 8080;\nconst app = express();\n\nconst listEndpoints = require('express-list-endpoints');\n\napp.use(cors());\napp.use(bodyParser.json());\napp.use((req, res, next) => {\n  if (mongoose.connection.readyState === 1) {\n    next();\n  } else {\n    res.status(503).json({\n      error: 'Service Unavailable'\n    });\n  }\n});\napp.get('/', (req, res) => {\n  res.send(listEndpoints(app));\n}); // Sign-up\n\napp.post('/users', async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    const user = await new User({\n      email,\n      password\n    }).save();\n    res.status(200).json({\n      userId: user._id,\n      accessToken: user.accessToken\n    });\n  } catch (err) {\n    res.status(400).json({\n      message: 'Could not create user',\n      errors: err\n    });\n  }\n}); // Login\n\napp.post('/sessions', async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    const user = await User.findOne({\n      email\n    });\n\n    if (user && bcrypt.compareSync(password, user.password)) {\n      res.status(200).json({\n        userId: user._id,\n        accessToken: user.accessToken\n      });\n    } else {\n      throw 'User not found';\n    }\n  } catch (err) {\n    res.status(404).json({\n      error: 'User not found'\n    });\n  }\n});\napp.get('/secret', authenticateUser); // Allow one specific domain for one specific endpoint\n\napp.get('/secret', cors({\n  origin: 'localhost:3000'\n}), async (req, res) => {\n  console.log(`User from authenticateUser: ${req.user}`);\n  const secretMessage = `We can modify this secret message for ${req.user.email}`;\n  res.status(200).json({\n    secretMessage\n  });\n}); // Get user specific information\n\napp.get('/users/:id/profile', authenticateUser);\napp.get('/users/:id/profile', async (req, res) => {\n  const user = await User.findOne({\n    _id: req.params.id\n  });\n  const publicProfileMessage = `This is a public profile message for ${user.email}`;\n  const privateProfileMessage = `This is a private profile message for ${user.email}`;\n  console.log(`Authenticated req.user._id: '${req.user._id.$oid}'`);\n  console.log(`Requested     user._id    : '${user._id}'`);\n  console.log(`Equal   : ${req.user_id == user._id}`); // Decide private or public here\n\n  if (req.user._id.$oid === user._id.$oid) {\n    // Private\n    res.status(200).json({\n      profileMessage: privateProfileMessage\n    });\n  } else {\n    // Public information or Forbidden (403) because the users don't match\n    res.status(200).json({\n      profileMessage: publicProfileMessage\n    });\n  }\n});\napp.get('/reviews', async (req, res) => {\n  try {\n    const reviews = await Review.find().sort({\n      createdAt: 'desc'\n    }).limit(20).exec();\n    res.status(200).json(reviews);\n  } catch (err) {\n    res.status(404).json({\n      message: 'Page not found',\n      error: err.errors\n    });\n  }\n});\napp.post('/reviews', async (req, res) => {\n  const {\n    message,\n    email\n  } = req.body;\n  const review = new Review({\n    message,\n    email\n  });\n\n  try {\n    const savedReview = await review.save();\n    res.status(200).json(savedReview);\n  } catch (err) {\n    res.status(400).json({\n      message: 'Bad request. Could not save review to the database',\n      error: err.errors\n    });\n  }\n}); // Start the server\n\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJib2R5UGFyc2VyIiwiY29ycyIsIm1vbmdvb3NlIiwiY3J5cHRvIiwiYmNyeXB0IiwiZG90ZW52IiwiY29uZmlnIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJIRVJPIiwibW9uZ29VcmwiLCJNT05HT19VUkwiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiUHJvbWlzZSIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJlbWFpbCIsInR5cGUiLCJTdHJpbmciLCJ1bmlxdWUiLCJyZXF1aXJlZCIsInBhc3N3b3JkIiwibWluTGVuZ3RoIiwiYWNjZXNzVG9rZW4iLCJkZWZhdWx0IiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsInByZSIsIm5leHQiLCJ1c2VyIiwiaXNNb2RpZmllZCIsIlJFU0VUX0RBVEFCQVNFIiwic2VlZERhdGFiYXNlIiwiVXNlciIsImRlbGV0ZU1hbnkiLCJSZXZpZXciLCJzYWx0IiwiZ2VuU2FsdFN5bmMiLCJoYXNoU3luYyIsImF1dGhlbnRpY2F0ZVVzZXIiLCJyZXEiLCJyZXMiLCJoZWFkZXIiLCJmaW5kT25lIiwiZXJyIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibW9kZWwiLCJhdXRob3IiLCJtYXhMZW5ndGgiLCJ0ZXh0IiwibWlubGVuZ3RoIiwibWF4bGVuZ3RoIiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsInBvcnQiLCJQT1JUIiwiYXBwIiwibGlzdEVuZHBvaW50cyIsInJlcXVpcmUiLCJ1c2UiLCJjb25uZWN0aW9uIiwicmVhZHlTdGF0ZSIsImdldCIsInNlbmQiLCJwb3N0IiwiYm9keSIsInNhdmUiLCJ1c2VySWQiLCJfaWQiLCJtZXNzYWdlIiwiZXJyb3JzIiwiY29tcGFyZVN5bmMiLCJvcmlnaW4iLCJzZWNyZXRNZXNzYWdlIiwicGFyYW1zIiwiaWQiLCJwdWJsaWNQcm9maWxlTWVzc2FnZSIsInByaXZhdGVQcm9maWxlTWVzc2FnZSIsIiRvaWQiLCJ1c2VyX2lkIiwicHJvZmlsZU1lc3NhZ2UiLCJyZXZpZXdzIiwiZmluZCIsInNvcnQiLCJsaW1pdCIsImV4ZWMiLCJyZXZpZXciLCJzYXZlZFJldmlldyIsImxpc3RlbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsT0FBUCxNQUFvQixTQUFwQjtBQUNBLE9BQU9DLFVBQVAsTUFBdUIsYUFBdkI7QUFDQSxPQUFPQyxJQUFQLE1BQWlCLE1BQWpCO0FBQ0EsT0FBT0MsUUFBUCxNQUFxQixVQUFyQjtBQUNBLE9BQU9DLE1BQVAsTUFBbUIsUUFBbkI7QUFDQSxPQUFPQyxNQUFQLE1BQW1CLFFBQW5CO0FBQ0EsT0FBT0MsTUFBUCxNQUFtQixRQUFuQjtBQUVBQSxNQUFNLENBQUNDLE1BQVA7QUFDQUMsT0FBTyxDQUFDQyxHQUFSLENBQVksaUJBQWlCQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsSUFBekM7QUFFQSxNQUFNQyxRQUFRLEdBQUdILE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxTQUFaLElBQXlCLGtDQUExQztBQUNBWCxRQUFRLENBQUNZLE9BQVQsQ0FBaUJGLFFBQWpCLEVBQTJCO0FBQUVHLEVBQUFBLGVBQWUsRUFBRSxJQUFuQjtBQUF5QkMsRUFBQUEsa0JBQWtCLEVBQUU7QUFBN0MsQ0FBM0I7QUFDQWQsUUFBUSxDQUFDZSxPQUFULEdBQW1CQSxPQUFuQjtBQUVBLE1BQU1DLFVBQVUsR0FBRyxJQUFJaEIsUUFBUSxDQUFDaUIsTUFBYixDQUFvQjtBQUNyQ0MsRUFBQUEsS0FBSyxFQUFFO0FBQ0xDLElBQUFBLElBQUksRUFBRUMsTUFERDtBQUVMQyxJQUFBQSxNQUFNLEVBQUUsSUFGSDtBQUdMQyxJQUFBQSxRQUFRLEVBQUU7QUFITCxHQUQ4QjtBQU1yQ0MsRUFBQUEsUUFBUSxFQUFFO0FBQ1JKLElBQUFBLElBQUksRUFBRUMsTUFERTtBQUVSRSxJQUFBQSxRQUFRLEVBQUUsSUFGRjtBQUdSRSxJQUFBQSxTQUFTLEVBQUU7QUFI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Q0QsQ0FGRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvTmFkaWEvVGVjaG5pZ28vRmluYWwtcHJvamVjdC9zZXJ2ZXIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnNvbGUubG9nKFwiT3VyIGhlcm8gaXM6XCIgKyBwcm9jZXNzLmVudi5IRVJPKTtcblxuY29uc3QgbW9uZ29VcmwgPSBwcm9jZXNzLmVudi5NT05HT19VUkwgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3QvZmluYWxQcm9qZWN0Jztcbm1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmwsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSk7XG5tb25nb29zZS5Qcm9taXNlID0gUHJvbWlzZTtcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB1bmlxdWU6IHRydWUsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIG1pbkxlbmd0aDogNSxcbiAgfSxcbiAgYWNjZXNzVG9rZW46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogKCkgPT4gY3J5cHRvLnJhbmRvbUJ5dGVzKDEyOCkudG9TdHJpbmcoJ2hleCcpLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgfSxcbn0pO1xuXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XG4gIGNvbnN0IHVzZXIgPSB0aGlzO1xuXG4gIGlmICghdXNlci5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSB7XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfVxuXG5cbmlmIChwcm9jZXNzLmVudi5SRVNFVF9EQVRBQkFTRSkge1xuICAgIGNvbnNvbGUubG9nKCdSZXNldHRpbmcgZGF0YWJhc2UhJyk7XG4gICAgY29uc3Qgc2VlZERhdGFiYXNlID0gYXN5bmMgKCkgPT4ge1xuICAgIFxuICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSgpO1xuICAgIGF3YWl0IFJldmlldy5kZWxldGVNYW55KCk7XG4gICAgXG5cbiAgICB9XG4gICAgc2VlZERhdGFiYXNlKCk7XG4gIH1cblxuICBjb25zdCBzYWx0ID0gYmNyeXB0LmdlblNhbHRTeW5jKCk7XG4gIGNvbnNvbGUubG9nKGBQUkUtIHBhc3N3b3JkIGJlZm9yZSBoYXNoOiAke3VzZXIucGFzc3dvcmR9YCk7XG4gIHVzZXIucGFzc3dvcmQgPSBiY3J5cHQuaGFzaFN5bmModXNlci5wYXNzd29yZCwgc2FsdCk7XG4gIGNvbnNvbGUubG9nKGBQUkUtIHBhc3N3b3JkIGFmdGVyICBoYXNoOiAke3VzZXIucGFzc3dvcmR9YCk7XG5cbiAgLy8gQ29udGludWUgd2l0aCB0aGUgc2F2ZVxuICBuZXh0KCk7XG59KTtcblxuY29uc3QgYXV0aGVudGljYXRlVXNlciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gcmVxLmhlYWRlcignQXV0aG9yaXphdGlvbicpO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBhY2Nlc3NUb2tlbiB9KTtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHRocm93ICdVc2VyIG5vdCBmb3VuZCc7XG4gICAgfVxuICAgIHJlcS51c2VyID0gdXNlcjtcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICdQbGVhc2UgdHJ5IGxvZ2dpbmcgaW4gYWdhaW4nO1xuICAgIGNvbnNvbGUubG9nKGVycm9yTWVzc2FnZSk7XG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0pO1xuICB9XG59O1xuXG4vLyEgZ29vZ2xlIHJldmlldyBkZXRhaWxzP1xuXG5jb25zdCBSZXZpZXcgPSAgbW9uZ29vc2UubW9kZWwoJ1JldmlldycsIHtcbiAgICBhdXRob3I6IHsgXG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgICBtaW5MZW5ndGg6IDMsXG4gICAgICAgIG1heExlbmd0aDogMjBcbiAgICB9LFxuICAgIHRleHQ6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWlubGVuZ3RoOiBbNSwgXCJSZXZpZXcgbXVzdCBiZSBhdCBsZWFzdCA1IGNoYXJhY3RlcnNcIl0sXG4gICAgICAgIG1heGxlbmd0aDogIFsyMDAsIFwiUmV2aWV3IG11c3QgYmUgYXQgbW9zdCAyMDAgY2hhcmFjdGVyc1wiXSxcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICB0eXBlOiBEYXRlLFxuICAgICAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICAgIH0sXG59KTtcblxuXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcblxuXG4vLyAgIFBPUlQ9OTAwMCBucG0gc3RhcnRcbmNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgwODA7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmNvbnN0IGxpc3RFbmRwb2ludHMgPSByZXF1aXJlKCdleHByZXNzLWxpc3QtZW5kcG9pbnRzJylcblxuYXBwLnVzZShjb3JzKCkpXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKVxuXG5hcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBpZiAobW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgbmV4dCgpXG4gIH0gZWxzZSB7XG4gICAgcmVzLnN0YXR1cyg1MDMpLmpzb24oeyBlcnJvcjogJ1NlcnZpY2UgVW5hdmFpbGFibGUnIH0pXG4gIH1cbn0pXG5cbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZChsaXN0RW5kcG9pbnRzKGFwcCkpXG4gIH0pXG5cbi8vIFNpZ24tdXBcbmFwcC5wb3N0KCcvdXNlcnMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IG5ldyBVc2VyKHtcbiAgICAgIGVtYWlsLFxuICAgICAgcGFzc3dvcmQsXG4gICAgfSkuc2F2ZSgpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcklkOiB1c2VyLl9pZCwgYWNjZXNzVG9rZW46IHVzZXIuYWNjZXNzVG9rZW4gfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ0NvdWxkIG5vdCBjcmVhdGUgdXNlcicsIGVycm9yczogZXJyIH0pO1xuICB9XG59KTtcblxuLy8gTG9naW5cbmFwcC5wb3N0KCcvc2Vzc2lvbnMnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xuICAgIGlmICh1c2VyICYmIGJjcnlwdC5jb21wYXJlU3luYyhwYXNzd29yZCwgdXNlci5wYXNzd29yZCkpIHtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcklkOiB1c2VyLl9pZCwgYWNjZXNzVG9rZW46IHVzZXIuYWNjZXNzVG9rZW4gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93ICdVc2VyIG5vdCBmb3VuZCc7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0pO1xuICB9XG59KTtcblxuYXBwLmdldCgnL3NlY3JldCcsIGF1dGhlbnRpY2F0ZVVzZXIpO1xuLy8gQWxsb3cgb25lIHNwZWNpZmljIGRvbWFpbiBmb3Igb25lIHNwZWNpZmljIGVuZHBvaW50XG5hcHAuZ2V0KCcvc2VjcmV0JywgY29ycyh7IG9yaWdpbjogJ2xvY2FsaG9zdDozMDAwJyB9KSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBVc2VyIGZyb20gYXV0aGVudGljYXRlVXNlcjogJHtyZXEudXNlcn1gKTtcbiAgY29uc3Qgc2VjcmV0TWVzc2FnZSA9IGBXZSBjYW4gbW9kaWZ5IHRoaXMgc2VjcmV0IG1lc3NhZ2UgZm9yICR7cmVxLnVzZXIuZW1haWx9YDtcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzZWNyZXRNZXNzYWdlIH0pO1xufSk7XG5cblxuLy8gR2V0IHVzZXIgc3BlY2lmaWMgaW5mb3JtYXRpb25cbmFwcC5nZXQoJy91c2Vycy86aWQvcHJvZmlsZScsIGF1dGhlbnRpY2F0ZVVzZXIpO1xuYXBwLmdldCgnL3VzZXJzLzppZC9wcm9maWxlJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSk7XG4gIGNvbnN0IHB1YmxpY1Byb2ZpbGVNZXNzYWdlID0gYFRoaXMgaXMgYSBwdWJsaWMgcHJvZmlsZSBtZXNzYWdlIGZvciAke3VzZXIuZW1haWx9YDtcbiAgY29uc3QgcHJpdmF0ZVByb2ZpbGVNZXNzYWdlID0gYFRoaXMgaXMgYSBwcml2YXRlIHByb2ZpbGUgbWVzc2FnZSBmb3IgJHt1c2VyLmVtYWlsfWA7XG5cbiAgY29uc29sZS5sb2coYEF1dGhlbnRpY2F0ZWQgcmVxLnVzZXIuX2lkOiAnJHtyZXEudXNlci5faWQuJG9pZH0nYCk7XG4gIGNvbnNvbGUubG9nKGBSZXF1ZXN0ZWQgICAgIHVzZXIuX2lkICAgIDogJyR7dXNlci5faWR9J2ApO1xuICBjb25zb2xlLmxvZyhgRXF1YWwgICA6ICR7cmVxLnVzZXJfaWQgPT0gdXNlci5faWR9YCk7XG5cbiAgLy8gRGVjaWRlIHByaXZhdGUgb3IgcHVibGljIGhlcmVcbiAgaWYgKHJlcS51c2VyLl9pZC4kb2lkID09PSB1c2VyLl9pZC4kb2lkKSB7XG4gICAgLy8gUHJpdmF0ZVxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcHJvZmlsZU1lc3NhZ2U6IHByaXZhdGVQcm9maWxlTWVzc2FnZSB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBQdWJsaWMgaW5mb3JtYXRpb24gb3IgRm9yYmlkZGVuICg0MDMpIGJlY2F1c2UgdGhlIHVzZXJzIGRvbid0IG1hdGNoXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBwcm9maWxlTWVzc2FnZTogcHVibGljUHJvZmlsZU1lc3NhZ2UgfSk7XG4gIH1cbn0pO1xuXG5cbmFwcC5nZXQoJy9yZXZpZXdzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICBjb25zdCByZXZpZXdzID0gYXdhaXQgUmV2aWV3LmZpbmQoKVxuICAgICAgICAuc29ydCh7Y3JlYXRlZEF0OiAnZGVzYyd9KVxuICAgICAgICAubGltaXQoMjApXG4gICAgICAgIC5leGVjKCk7IFxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXZpZXdzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ1BhZ2Ugbm90IGZvdW5kJywgZXJyb3I6IGVyci5lcnJvcnMgfSlcbiAgICB9XG4gIH0pO1xuICBcbiAgYXBwLnBvc3QoJy9yZXZpZXdzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBlbWFpbCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgcmV2aWV3ID0gbmV3IFJldmlldyh7IG1lc3NhZ2UsIGVtYWlsIH0pO1xuICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRSZXZpZXcgPSBhd2FpdCByZXZpZXcuc2F2ZSgpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oc2F2ZWRSZXZpZXcpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnQmFkIHJlcXVlc3QuIENvdWxkIG5vdCBzYXZlIHJldmlldyB0byB0aGUgZGF0YWJhc2UnLCBlcnJvcjogZXJyLmVycm9ycyB9KTtcbiAgICB9XG4gIH0pO1xuXG4vLyBTdGFydCB0aGUgc2VydmVyXG5hcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fWApO1xufSk7XG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "bodyParser",
        "cors",
        "mongoose",
        "crypto",
        "bcrypt",
        "dotenv",
        "config",
        "console",
        "log",
        "process",
        "env",
        "HERO",
        "mongoUrl",
        "MONGO_URL",
        "connect",
        "useNewUrlParser",
        "useUnifiedTopology",
        "Promise",
        "userSchema",
        "Schema",
        "email",
        "type",
        "String",
        "unique",
        "required",
        "password",
        "minLength",
        "accessToken",
        "default",
        "randomBytes",
        "toString",
        "pre",
        "next",
        "user",
        "isModified",
        "RESET_DATABASE",
        "seedDatabase",
        "User",
        "deleteMany",
        "Review",
        "salt",
        "genSaltSync",
        "hashSync",
        "authenticateUser",
        "req",
        "res",
        "header",
        "findOne",
        "err",
        "errorMessage",
        "status",
        "json",
        "error",
        "model",
        "author",
        "maxLength",
        "text",
        "minlength",
        "maxlength",
        "createdAt",
        "Date",
        "now",
        "port",
        "PORT",
        "app",
        "listEndpoints",
        "require",
        "use",
        "connection",
        "readyState",
        "get",
        "send",
        "post",
        "body",
        "save",
        "userId",
        "_id",
        "message",
        "errors",
        "compareSync",
        "origin",
        "secretMessage",
        "params",
        "id",
        "publicProfileMessage",
        "privateProfileMessage",
        "$oid",
        "user_id",
        "profileMessage",
        "reviews",
        "find",
        "sort",
        "limit",
        "exec",
        "review",
        "savedReview",
        "listen"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
      "sourcesContent": [
        "import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport mongoose from 'mongoose';\nimport crypto from 'crypto';\nimport bcrypt from 'bcrypt';\nimport dotenv from 'dotenv';\n\ndotenv.config();\nconsole.log(\"Our hero is:\" + process.env.HERO);\n\nconst mongoUrl = process.env.MONGO_URL || 'mongodb://localhost/finalProject';\nmongoose.connect(mongoUrl, { useNewUrlParser: true, useUnifiedTopology: true });\nmongoose.Promise = Promise;\n\nconst userSchema = new mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    required: true,\n  },\n  password: {\n    type: String,\n    required: true,\n    minLength: 5,\n  },\n  accessToken: {\n    type: String,\n    default: () => crypto.randomBytes(128).toString('hex'),\n    unique: true,\n  },\n});\n\nuserSchema.pre('save', async function (next) {\n  const user = this;\n\n  if (!user.isModified('password')) {\n    return next();\n  }\n\n\nif (process.env.RESET_DATABASE) {\n    console.log('Resetting database!');\n    const seedDatabase = async () => {\n    \n    await User.deleteMany();\n    await Review.deleteMany();\n    \n\n    }\n    seedDatabase();\n  }\n\n  const salt = bcrypt.genSaltSync();\n  console.log(`PRE- password before hash: ${user.password}`);\n  user.password = bcrypt.hashSync(user.password, salt);\n  console.log(`PRE- password after  hash: ${user.password}`);\n\n  // Continue with the save\n  next();\n});\n\nconst authenticateUser = async (req, res, next) => {\n  try {\n    const accessToken = req.header('Authorization');\n    const user = await User.findOne({ accessToken });\n    if (!user) {\n      throw 'User not found';\n    }\n    req.user = user;\n    next();\n  } catch (err) {\n    const errorMessage = 'Please try logging in again';\n    console.log(errorMessage);\n    res.status(401).json({ error: errorMessage });\n  }\n};\n\n//! google review details?\n\nconst Review =  mongoose.model('Review', {\n    author: { \n        type: String,\n        unique: true,\n        minLength: 3,\n        maxLength: 20\n    },\n    text: {\n        type: String,\n        required: true,\n        minlength: [5, \"Review must be at least 5 characters\"],\n        maxlength:  [200, \"Review must be at most 200 characters\"],\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n});\n\n\nconst User = mongoose.model('User', userSchema);\n\n\n//   PORT=9000 npm start\nconst port = process.env.PORT || 8080;\nconst app = express();\n\nconst listEndpoints = require('express-list-endpoints')\n\napp.use(cors())\napp.use(bodyParser.json())\n\napp.use((req, res, next) => {\n  if (mongoose.connection.readyState === 1) {\n    next()\n  } else {\n    res.status(503).json({ error: 'Service Unavailable' })\n  }\n})\n\napp.get('/', (req, res) => {\n    res.send(listEndpoints(app))\n  })\n\n// Sign-up\napp.post('/users', async (req, res) => {\n  try {\n    const { email, password } = req.body;\n    const user = await new User({\n      email,\n      password,\n    }).save();\n    res.status(200).json({ userId: user._id, accessToken: user.accessToken });\n  } catch (err) {\n    res.status(400).json({ message: 'Could not create user', errors: err });\n  }\n});\n\n// Login\napp.post('/sessions', async (req, res) => {\n  try {\n    const { email, password } = req.body;\n    const user = await User.findOne({ email });\n    if (user && bcrypt.compareSync(password, user.password)) {\n      res.status(200).json({ userId: user._id, accessToken: user.accessToken });\n    } else {\n      throw 'User not found';\n    }\n  } catch (err) {\n    res.status(404).json({ error: 'User not found' });\n  }\n});\n\napp.get('/secret', authenticateUser);\n// Allow one specific domain for one specific endpoint\napp.get('/secret', cors({ origin: 'localhost:3000' }), async (req, res) => {\n  console.log(`User from authenticateUser: ${req.user}`);\n  const secretMessage = `We can modify this secret message for ${req.user.email}`;\n  res.status(200).json({ secretMessage });\n});\n\n\n// Get user specific information\napp.get('/users/:id/profile', authenticateUser);\napp.get('/users/:id/profile', async (req, res) => {\n  const user = await User.findOne({ _id: req.params.id });\n  const publicProfileMessage = `This is a public profile message for ${user.email}`;\n  const privateProfileMessage = `This is a private profile message for ${user.email}`;\n\n  console.log(`Authenticated req.user._id: '${req.user._id.$oid}'`);\n  console.log(`Requested     user._id    : '${user._id}'`);\n  console.log(`Equal   : ${req.user_id == user._id}`);\n\n  // Decide private or public here\n  if (req.user._id.$oid === user._id.$oid) {\n    // Private\n    res.status(200).json({ profileMessage: privateProfileMessage });\n  } else {\n    // Public information or Forbidden (403) because the users don't match\n    res.status(200).json({ profileMessage: publicProfileMessage });\n  }\n});\n\n\napp.get('/reviews', async (req, res) => {\n    try {\n    const reviews = await Review.find()\n        .sort({createdAt: 'desc'})\n        .limit(20)\n        .exec(); \n        res.status(200).json(reviews);\n    } catch (err) {\n      res.status(404).json({ message: 'Page not found', error: err.errors })\n    }\n  });\n  \n  app.post('/reviews', async (req, res) => {\n    const { message, email } = req.body;\n    const review = new Review({ message, email });\n  \n    try {\n      const savedReview = await review.save();\n      res.status(200).json(savedReview);\n    } catch (err) {\n      res.status(400).json({ message: 'Bad request. Could not save review to the database', error: err.errors });\n    }\n  });\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on http://localhost:${port}`);\n});\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1612293514195
  },
  "{\"sourceRoot\":\"/Users/Nadia/Technigo/Final-project/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/Nadia/Technigo/Final-project/server\",\"filename\":\"/Users/Nadia/Technigo/Final-project/server/schemas.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/Nadia/Technigo/Final-project/server\",\"plugins\":[],\"presets\":[]}:7.12.10": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/Nadia/Technigo/Final-project/server",
      "filename": "/Users/Nadia/Technigo/Final-project/server/schemas.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/Nadia/Technigo/Final-project/server",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/Nadia/Technigo/Final-project/server/schemas.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/Nadia/Technigo/Final-project/server/schemas.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
        "sourceFileName": "schemas.js"
      }
    },
    "ast": null,
    "code": "import mongoose from 'mongoose';\n\nconst Schemas = () => {\n  const userSchema = new mongoose.Schema({\n    email: {\n      type: String,\n      unique: true,\n      required: true\n    },\n    password: {\n      type: String,\n      required: true,\n      minLength: 2\n    },\n    accessToken: {\n      type: String,\n      default: () => crypto.randomBytes(128).toString('hex'),\n      unique: true\n    }\n  }); // // user validation\n  // userSchema.pre('save', async function (next) {\n  // \tconst user = this;\n  // \tif (!user.isModified('password')) {\n  // \t\treturn next();\n  // \t}\n  //   const salt = bcrypt.genSaltSync();\n  // \tuser.password = bcrypt.hashSync(user.password, salt);\n  // \tnext();\n  // });\n\n  const clinicSchema = new mongoose.Schema({\n    formatted_address: {\n      type: String\n    },\n    formatted_phone_number: {\n      type: Number\n    },\n    name: {\n      type: String,\n      unique: true\n    },\n    opening_hours: {\n      type: Array\n    },\n    rating: {\n      type: Number\n    }\n  });\n  const reviewSchema = new mongoose.Schema({\n    user: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'User',\n      required: true\n    },\n    clinic: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'Clinic',\n      required: true\n    },\n    reception: {\n      type: Array\n    },\n    timely: {\n      type: Array\n    },\n    helpful: {\n      type: Array\n    },\n    recommendation: {\n      type: Array\n    },\n    testimonial: {\n      type: String,\n      maxLength: 200\n    },\n    createdAt: {\n      type: Date,\n      default: Date.now\n    }\n  });\n};\n\nexport default Schemas;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVtYXMuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWFzIiwidXNlclNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInVuaXF1ZSIsInJlcXVpcmVkIiwicGFzc3dvcmQiLCJtaW5MZW5ndGgiLCJhY2Nlc3NUb2tlbiIsImRlZmF1bHQiLCJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiY2xpbmljU2NoZW1hIiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJmb3JtYXR0ZWRfcGhvbmVfbnVtYmVyIiwiTnVtYmVyIiwibmFtZSIsIm9wZW5pbmdfaG91cnMiLCJBcnJheSIsInJhdGluZyIsInJldmlld1NjaGVtYSIsInVzZXIiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiY2xpbmljIiwicmVjZXB0aW9uIiwidGltZWx5IiwiaGVscGZ1bCIsInJlY29tbWVuZGF0aW9uIiwidGVzdGltb25pYWwiLCJtYXhMZW5ndGgiLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93Il0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxRQUFQLE1BQXFCLFVBQXJCOztBQUVBLE1BQU1DLE9BQU8sR0FBRyxNQUFNO0FBQ3RCLFFBQU1DLFVBQVUsR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQWIsQ0FBb0I7QUFDckNDLElBQUFBLEtBQUssRUFBRTtBQUNMQyxNQUFBQSxJQUFJLEVBQUVDLE1BREQ7QUFFTEMsTUFBQUEsTUFBTSxFQUFFLElBRkg7QUFHTEMsTUFBQUEsUUFBUSxFQUFFO0FBSEwsS0FEOEI7QUFNckNDLElBQUFBLFFBQVEsRUFBRTtBQUNSSixNQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkUsTUFBQUEsUUFBUSxFQUFFLElBRkY7QUFHUkUsTUFBQUEsU0FBUyxFQUFFO0FBSEgsS0FOMkI7QUFXckNDLElBQUFBLFdBQVcsRUFBRTtBQUNYTixNQUFBQSxJQUFJLEVBQUVDLE1BREs7QUFFWE0sTUFBQUEsT0FBTyxFQUFFLE1BQU1DLE1BQU0sQ0FBQ0MsV0FBUCxDQUFtQixHQUFuQixFQUF3QkMsUUFBeEIsQ0FBaUMsS0FBakMsQ0FGSjtBQUdYUixNQUFBQSxNQUFNLEVBQUU7QUFIRztBQVh3QixHQUFwQixDQUFuQixDQURzQixDQW1CdEI7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBTVMsWUFBWSxHQUFHLElBQUloQixRQUFRLENBQUNHLE1BQWIsQ0FBb0I7QUFDdkNjLElBQUFBLGlCQUFpQixFQUFFO0FBQ2pCWixNQUFBQSxJQUFJLEVBQUVDO0FBRFcsS0FEb0I7QUFJdkNZLElBQUFBLHNCQUFzQixFQUFFO0FBQ3RCYixNQUFBQSxJQUFJLEVBQUVjO0FBRGdCLEtBSmU7QUFPdkNDLElBQUFBLElBQUksRUFBRTtBQUNKZixNQUFBQSxJQUFJLEVBQUVDLE1BREY7QUFFSkMsTUFBQUEsTUFBTSxFQUFFO0FBRkosS0FQaUM7QUFXdkNjLElBQUFBLGFBQWEsRUFBRTtBQUNiaEIsTUFBQUEsSUFBSSxFQUFFaUI7QUFETyxLQVh3QjtBQWN2Q0MsSUFBQUEsTUFBTSxFQUFDO0FBQ0xsQixNQUFBQSxJQUFJLEVBQUVjO0FBREQ7QUFkZ0MsR0FBcEIsQ0FBckI7QUFxQkEsUUFBTUssWUFBWSxHQUFHLElBQUl4QixRQUFRLENBQUNHLE1BQWIsQ0FBb0I7QUFDdkNzQixJQUFBQSxJQUFJLEVBQUU7QUFDSnBCLE1BQUFBLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFULENBQWdCdUIsS0FBaEIsQ0FBc0JDLFFBRHhCO0FBRUpDLE1BQUFBLEdBQUcsRUFBRSxNQUZEO0FBR0pwQixNQUFBQSxRQUFRLEVBQUU7QUFITixLQURpQztBQU1yQ3FCLElBQUFBLE1BQU0sRUFBRTtBQUNKeEIsTUFBQUEsSUFBSSxFQUFFTCxRQUFRLENBQUNHLE1BQVQsQ0FBZ0J1QixLQUFoQixDQUFzQkMsUUFEeEI7QUFFSkMsTUFBQUEsR0FBRyxFQUFFLFFBRkQ7QUFHSnBCLE1BQUFBLFFBQVEsRUFBRTtBQUhOLEtBTjZCO0FBV3JDc0IsSUFBQUEsU0FBUyxFQUFFO0FBQ1R6QixNQUFBQSxJQUFJLEVBQUVpQjtBQURHLEtBWDBCO0FBY3JDUyxJQUFBQSxNQUFNLEVBQUU7QUFDTjFCLE1BQUFBLElBQUksRUFBRWlCO0FBREEsS0FkNkI7QUFpQnJDVSxJQUFBQSxPQUFPLEVBQUU7QUFDUDNCLE1BQUFBLElBQUksRUFBRWlCO0FBREMsS0FqQjRCO0FBb0JyQ1csSUFBQUEsY0FBYyxFQUFFO0FBQ2Q1QixNQUFBQSxJQUFJLEVBQUVpQjtBQURRLEtBcEJxQjtBQXVCckNZLElBQUFBLFdBQVcsRUFBRTtBQUNYN0IsTUFBQUEsSUFBSSxFQUFFQyxNQURLO0FBRVg2QixNQUFBQSxTQUFTLEVBQUU7QUFGQSxLQXZCd0I7QUEyQnJDQyxJQUFBQSxTQUFTLEVBQUU7QUFDUC9CLE1BQUFBLElBQUksRUFBRWdDLElBREM7QUFFUHpCLE1BQUFBLE9BQU8sRUFBRXlCLElBQUksQ0FBQ0M7QUFGUDtBQTNCMEIsR0FBcEIsQ0FBckI7QUFpQ0MsQ0F0RkQ7O0FBd0ZBLGVBQWVyQyxPQUFmIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9OYWRpYS9UZWNobmlnby9GaW5hbC1wcm9qZWN0L3NlcnZlci8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBTY2hlbWFzID0gKCkgPT4ge1xuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB1bmlxdWU6IHRydWUsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIG1pbkxlbmd0aDogMixcbiAgfSxcbiAgYWNjZXNzVG9rZW46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogKCkgPT4gY3J5cHRvLnJhbmRvbUJ5dGVzKDEyOCkudG9TdHJpbmcoJ2hleCcpLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgfSxcbn0pO1xuXG4vLyAvLyB1c2VyIHZhbGlkYXRpb25cbi8vIHVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24gKG5leHQpIHtcbi8vIFx0Y29uc3QgdXNlciA9IHRoaXM7XG5cbi8vIFx0aWYgKCF1c2VyLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHtcbi8vIFx0XHRyZXR1cm4gbmV4dCgpO1xuLy8gXHR9XG5cbi8vICAgY29uc3Qgc2FsdCA9IGJjcnlwdC5nZW5TYWx0U3luYygpO1xuLy8gXHR1c2VyLnBhc3N3b3JkID0gYmNyeXB0Lmhhc2hTeW5jKHVzZXIucGFzc3dvcmQsIHNhbHQpO1xuLy8gXHRuZXh0KCk7XG4vLyB9KTtcblxuY29uc3QgY2xpbmljU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGZvcm1hdHRlZF9hZGRyZXNzOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGZvcm1hdHRlZF9waG9uZV9udW1iZXI6IHtcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSxcbiAgbmFtZTogeyBcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdW5pcXVlOiB0cnVlXG4gIH0sXG4gIG9wZW5pbmdfaG91cnM6IHtcbiAgICB0eXBlOiBBcnJheSxcbiAgfSxcbiAgcmF0aW5nOntcbiAgICB0eXBlOiBOdW1iZXJcbiAgfVxuICBcbn0pO1xuXG5cbmNvbnN0IHJldmlld1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICB1c2VyOiB7XG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgIHJlZjogJ1VzZXInLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gICAgY2xpbmljOiB7XG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgcmVmOiAnQ2xpbmljJyxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIHJlY2VwdGlvbjoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgfSxcbiAgICB0aW1lbHk6IHtcbiAgICAgIHR5cGU6IEFycmF5LFxuICAgIH0sXG4gICAgaGVscGZ1bDoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgfSxcbiAgICByZWNvbW1lbmRhdGlvbjoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgfSxcbiAgICB0ZXN0aW1vbmlhbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgbWF4TGVuZ3RoOiAyMDBcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICB0eXBlOiBEYXRlLFxuICAgICAgICBkZWZhdWx0OiBEYXRlLm5vd1xuICAgIH1cbn0pO1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjaGVtYXM7XG5cblxuXG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "schemas.js"
      ],
      "names": [
        "mongoose",
        "Schemas",
        "userSchema",
        "Schema",
        "email",
        "type",
        "String",
        "unique",
        "required",
        "password",
        "minLength",
        "accessToken",
        "default",
        "crypto",
        "randomBytes",
        "toString",
        "clinicSchema",
        "formatted_address",
        "formatted_phone_number",
        "Number",
        "name",
        "opening_hours",
        "Array",
        "rating",
        "reviewSchema",
        "user",
        "Types",
        "ObjectId",
        "ref",
        "clinic",
        "reception",
        "timely",
        "helpful",
        "recommendation",
        "testimonial",
        "maxLength",
        "createdAt",
        "Date",
        "now"
      ],
      "mappings": "AAAA,OAAOA,QAAP,MAAqB,UAArB;;AAEA,MAAMC,OAAO,GAAG,MAAM;AACtB,QAAMC,UAAU,GAAG,IAAIF,QAAQ,CAACG,MAAb,CAAoB;AACrCC,IAAAA,KAAK,EAAE;AACLC,MAAAA,IAAI,EAAEC,MADD;AAELC,MAAAA,MAAM,EAAE,IAFH;AAGLC,MAAAA,QAAQ,EAAE;AAHL,KAD8B;AAMrCC,IAAAA,QAAQ,EAAE;AACRJ,MAAAA,IAAI,EAAEC,MADE;AAERE,MAAAA,QAAQ,EAAE,IAFF;AAGRE,MAAAA,SAAS,EAAE;AAHH,KAN2B;AAWrCC,IAAAA,WAAW,EAAE;AACXN,MAAAA,IAAI,EAAEC,MADK;AAEXM,MAAAA,OAAO,EAAE,MAAMC,MAAM,CAACC,WAAP,CAAmB,GAAnB,EAAwBC,QAAxB,CAAiC,KAAjC,CAFJ;AAGXR,MAAAA,MAAM,EAAE;AAHG;AAXwB,GAApB,CAAnB,CADsB,CAmBtB;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,QAAMS,YAAY,GAAG,IAAIhB,QAAQ,CAACG,MAAb,CAAoB;AACvCc,IAAAA,iBAAiB,EAAE;AACjBZ,MAAAA,IAAI,EAAEC;AADW,KADoB;AAIvCY,IAAAA,sBAAsB,EAAE;AACtBb,MAAAA,IAAI,EAAEc;AADgB,KAJe;AAOvCC,IAAAA,IAAI,EAAE;AACJf,MAAAA,IAAI,EAAEC,MADF;AAEJC,MAAAA,MAAM,EAAE;AAFJ,KAPiC;AAWvCc,IAAAA,aAAa,EAAE;AACbhB,MAAAA,IAAI,EAAEiB;AADO,KAXwB;AAcvCC,IAAAA,MAAM,EAAC;AACLlB,MAAAA,IAAI,EAAEc;AADD;AAdgC,GAApB,CAArB;AAqBA,QAAMK,YAAY,GAAG,IAAIxB,QAAQ,CAACG,MAAb,CAAoB;AACvCsB,IAAAA,IAAI,EAAE;AACJpB,MAAAA,IAAI,EAAEL,QAAQ,CAACG,MAAT,CAAgBuB,KAAhB,CAAsBC,QADxB;AAEJC,MAAAA,GAAG,EAAE,MAFD;AAGJpB,MAAAA,QAAQ,EAAE;AAHN,KADiC;AAMrCqB,IAAAA,MAAM,EAAE;AACJxB,MAAAA,IAAI,EAAEL,QAAQ,CAACG,MAAT,CAAgBuB,KAAhB,CAAsBC,QADxB;AAEJC,MAAAA,GAAG,EAAE,QAFD;AAGJpB,MAAAA,QAAQ,EAAE;AAHN,KAN6B;AAWrCsB,IAAAA,SAAS,EAAE;AACTzB,MAAAA,IAAI,EAAEiB;AADG,KAX0B;AAcrCS,IAAAA,MAAM,EAAE;AACN1B,MAAAA,IAAI,EAAEiB;AADA,KAd6B;AAiBrCU,IAAAA,OAAO,EAAE;AACP3B,MAAAA,IAAI,EAAEiB;AADC,KAjB4B;AAoBrCW,IAAAA,cAAc,EAAE;AACd5B,MAAAA,IAAI,EAAEiB;AADQ,KApBqB;AAuBrCY,IAAAA,WAAW,EAAE;AACX7B,MAAAA,IAAI,EAAEC,MADK;AAEX6B,MAAAA,SAAS,EAAE;AAFA,KAvBwB;AA2BrCC,IAAAA,SAAS,EAAE;AACP/B,MAAAA,IAAI,EAAEgC,IADC;AAEPzB,MAAAA,OAAO,EAAEyB,IAAI,CAACC;AAFP;AA3B0B,GAApB,CAArB;AAiCC,CAtFD;;AAwFA,eAAerC,OAAf",
      "sourceRoot": "/Users/Nadia/Technigo/Final-project/server/",
      "sourcesContent": [
        "import mongoose from 'mongoose';\n\nconst Schemas = () => {\nconst userSchema = new mongoose.Schema({\n  email: {\n    type: String,\n    unique: true,\n    required: true,\n  },\n  password: {\n    type: String,\n    required: true,\n    minLength: 2,\n  },\n  accessToken: {\n    type: String,\n    default: () => crypto.randomBytes(128).toString('hex'),\n    unique: true,\n  },\n});\n\n// // user validation\n// userSchema.pre('save', async function (next) {\n// \tconst user = this;\n\n// \tif (!user.isModified('password')) {\n// \t\treturn next();\n// \t}\n\n//   const salt = bcrypt.genSaltSync();\n// \tuser.password = bcrypt.hashSync(user.password, salt);\n// \tnext();\n// });\n\nconst clinicSchema = new mongoose.Schema({\n  formatted_address: {\n    type: String\n  },\n  formatted_phone_number: {\n    type: Number\n  },\n  name: { \n    type: String,\n    unique: true\n  },\n  opening_hours: {\n    type: Array,\n  },\n  rating:{\n    type: Number\n  }\n  \n});\n\n\nconst reviewSchema = new mongoose.Schema({\n  user: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n    clinic: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'Clinic',\n        required: true\n    },\n    reception: {\n      type: Array,\n    },\n    timely: {\n      type: Array,\n    },\n    helpful: {\n      type: Array,\n    },\n    recommendation: {\n      type: Array,\n    },\n    testimonial: {\n      type: String,\n      maxLength: 200\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n\n}\n\nexport default Schemas;\n\n\n\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1613226032666
  }
}